<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LinkedIn Content Machine</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:        #0d0d0d;
      --surface:   #141414;
      --card:      #1a1a1a;
      --border:    #2a2a2a;
      --accent:    #00e5ff;
      --accent2:   #7c3aed;
      --green:     #22c55e;
      --yellow:    #f59e0b;
      --red:       #ef4444;
      --pink:      #ec4899;
      --text:      #e2e2e2;
      --muted:     #666;
      --radius:    10px;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    header {
      padding: 20px 32px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 16px;
      background: var(--surface);
    }
    header .logo {
      font-size: 11px;
      color: var(--accent);
      letter-spacing: 3px;
      text-transform: uppercase;
    }
    header h1 {
      font-size: 18px;
      font-weight: 600;
      color: #fff;
    }
    header .badge {
      margin-left: auto;
      font-size: 10px;
      padding: 4px 10px;
      border-radius: 20px;
      border: 1px solid var(--accent);
      color: var(--accent);
      letter-spacing: 1px;
    }

    /* ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ */
    .workspace {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    /* ‚îÄ‚îÄ LEFT SIDEBAR ‚îÄ‚îÄ */
    .sidebar {
      width: 280px;
      min-width: 280px;
      border-right: 1px solid var(--border);
      padding: 20px 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: var(--surface);
    }
    .sidebar-title {
      font-size: 10px;
      letter-spacing: 2px;
      color: var(--muted);
      text-transform: uppercase;
      padding: 0 8px 12px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 4px;
    }

    .card {
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px 16px;
      cursor: pointer;
      transition: all 0.2s;
      background: var(--card);
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: '';
      position: absolute;
      left: 0; top: 0; bottom: 0;
      width: 3px;
      background: var(--card-color, var(--accent));
      border-radius: 3px 0 0 3px;
    }
    .card:hover {
      border-color: var(--card-color, var(--accent));
      background: #1f1f1f;
      transform: translateX(2px);
    }
    .card.active {
      border-color: var(--card-color, var(--accent));
      background: #1f1f1f;
      box-shadow: 0 0 0 1px var(--card-color, var(--accent))22;
    }
    .card-num {
      font-size: 10px;
      color: var(--card-color, var(--accent));
      letter-spacing: 1px;
      margin-bottom: 6px;
    }
    .card-title {
      font-size: 13px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 4px;
    }
    .card-sub {
      font-size: 11px;
      color: var(--muted);
    }
    .card-icon {
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 20px;
      opacity: 0.25;
    }

    /* ‚îÄ‚îÄ DETAIL PANEL ‚îÄ‚îÄ */
    .detail {
      flex: 1;
      overflow-y: auto;
      padding: 28px 32px;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .detail-header {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    .detail-icon-wrap {
      width: 52px;
      height: 52px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
    }
    .detail-header h2 {
      font-size: 20px;
      font-weight: 700;
      color: #fff;
    }
    .detail-header p {
      font-size: 12px;
      color: var(--muted);
      margin-top: 4px;
      line-height: 1.6;
    }

    .section-label {
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 10px;
    }

    /* Tools grid */
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 10px;
    }
    .tool-chip {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 14px;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: border-color 0.2s;
    }
    .tool-chip:hover { border-color: #444; }
    .tool-dot {
      width: 8px; height: 8px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .tool-name { font-size: 12px; font-weight: 500; color: #ddd; }
    .tool-type { font-size: 10px; color: var(--muted); margin-top: 2px; }

    /* Steps */
    .steps { display: flex; flex-direction: column; gap: 0; }
    .step {
      display: flex;
      gap: 16px;
      position: relative;
    }
    .step:not(:last-child) .step-line {
      position: absolute;
      left: 15px;
      top: 34px;
      bottom: -4px;
      width: 1px;
      background: var(--border);
    }
    .step-num {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 600;
      flex-shrink: 0;
      margin-top: 2px;
      color: var(--step-color, var(--accent));
      border-color: var(--step-color, var(--accent));
      background: var(--bg);
      z-index: 1;
    }
    .step-body { padding-bottom: 20px; }
    .step-title { font-size: 13px; font-weight: 600; color: #fff; margin-bottom: 4px; }
    .step-desc { font-size: 11px; color: var(--muted); line-height: 1.7; }
    .step-code {
      margin-top: 8px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 10px 14px;
      font-size: 11px;
      color: var(--accent);
      overflow-x: auto;
      white-space: pre;
    }

    /* Flow diagram */
    .flow {
      display: flex;
      align-items: center;
      gap: 0;
      flex-wrap: wrap;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px 20px;
    }
    .flow-node {
      padding: 8px 14px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 500;
      border: 1px solid var(--border);
      background: var(--bg);
      color: #ddd;
      white-space: nowrap;
    }
    .flow-arrow {
      color: var(--muted);
      padding: 0 8px;
      font-size: 14px;
    }

    /* ‚îÄ‚îÄ BOTTOM: FILE STRUCTURE + COMMANDS ‚îÄ‚îÄ */
    .bottom-panel {
      border-top: 1px solid var(--border);
      background: var(--surface);
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    .bottom-section {
      padding: 24px 28px;
    }
    .bottom-section:first-child {
      border-right: 1px solid var(--border);
    }
    .bottom-section h3 {
      font-size: 11px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 16px;
    }

    /* File tree */
    .tree { font-size: 12px; line-height: 2; }
    .tree-line { display: flex; align-items: center; gap: 8px; }
    .tree-indent { padding-left: 20px; }
    .tree-indent2 { padding-left: 40px; }
    .t-dir { color: var(--accent); font-weight: 500; }
    .t-file { color: #aaa; }
    .t-comment { color: var(--muted); font-size: 11px; }
    .tree-branch { color: #444; }

    /* Commands */
    .cmd-list { display: flex; flex-direction: column; gap: 8px; }
    .cmd-item {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px 14px;
      font-size: 11px;
    }
    .cmd-prompt { color: var(--green); }
    .cmd-text { color: var(--accent); }
    .cmd-comment { color: var(--muted); display: block; margin-top: 2px; font-size: 10px; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #444; }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .detail-content { animation: fadeIn 0.25s ease; }

    /* Status dot */
    .status-dot {
      display: inline-block;
      width: 6px; height: 6px;
      border-radius: 50%;
      background: var(--green);
      margin-right: 6px;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .tag {
      display: inline-block;
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 4px;
      border: 1px solid;
      margin-right: 6px;
      margin-top: 4px;
    }
  </style>
</head>
<body>

<header>
  <div class="logo">// system</div>
  <h1>LinkedIn Content Machine</h1>
  <div class="badge"><span class="status-dot"></span>ACTIVE</div>
</header>

<div class="workspace">

  <!-- LEFT SIDEBAR -->
  <nav class="sidebar">
    <div class="sidebar-title">Pipeline Modules</div>

    <div class="card active" style="--card-color:#00e5ff" onclick="show(0, this)">
      <div class="card-num">01 ¬∑</div>
      <div class="card-title">–°–∫—Ä–µ–ø–∏–Ω–≥ —Ç–µ–º</div>
      <div class="card-sub">google-trends-api ¬∑ SerpAPI</div>
      <div class="card-icon">üîç</div>
    </div>

    <div class="card" style="--card-color:#7c3aed" onclick="show(1, this)">
      <div class="card-num">02 ¬∑</div>
      <div class="card-title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞</div>
      <div class="card-sub">Claude API ¬∑ Tone of Voice</div>
      <div class="card-icon">‚úçÔ∏è</div>
    </div>

    <div class="card" style="--card-color:#ec4899" onclick="show(2, this)">
      <div class="card-num">03 ¬∑</div>
      <div class="card-title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫</div>
      <div class="card-sub">Sharp ¬∑ Canvas ¬∑ Canva API</div>
      <div class="card-icon">üé®</div>
    </div>

    <div class="card" style="--card-color:#f59e0b" onclick="show(3, this)">
      <div class="card-num">04 ¬∑</div>
      <div class="card-title">–ê–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥</div>
      <div class="card-sub">LinkedIn Share API v2 ¬∑ cron</div>
      <div class="card-icon">üì°</div>
    </div>

    <div class="card" style="--card-color:#22c55e" onclick="show(4, this)">
      <div class="card-num">05 ¬∑</div>
      <div class="card-title">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
      <div class="card-sub">Feedback Loop ¬∑ Metrics</div>
      <div class="card-icon">üìä</div>
    </div>
  </nav>

  <!-- DETAIL PANEL -->
  <main class="detail" id="detail">
    <!-- filled by JS -->
  </main>

</div>

<!-- BOTTOM PANEL -->
<div class="bottom-panel">

  <div class="bottom-section">
    <h3>// –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</h3>
    <div class="tree">
      <div class="tree-line"><span class="t-dir">linkedin-machine/</span></div>
      <div class="tree-indent">
        <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-dir">src/</span></div>
        <div class="tree-indent">
          <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-file">scraper.js</span> <span class="t-comment">// google-trends-api + SerpAPI</span></div>
          <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-file">generator.js</span> <span class="t-comment">// Claude API (sonnet-4-5)</span></div>
          <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-file">image.js</span> <span class="t-comment">// Sharp + node-canvas cards</span></div>
          <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-file">poster.js</span> <span class="t-comment">// LinkedIn Share API v2</span></div>
          <div class="tree-line"><span class="tree-branch">‚îî‚îÄ</span> <span class="t-file">analytics.js</span> <span class="t-comment">// CSV/Puppeteer + PR loop</span></div>
        </div>
        <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-dir">prompts/</span></div>
        <div class="tree-indent">
          <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-file">tone-of-voice.md</span></div>
          <div class="tree-line"><span class="tree-branch">‚îî‚îÄ</span> <span class="t-file">post-template.md</span></div>
        </div>
        <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-dir">config/</span></div>
        <div class="tree-indent">
          <div class="tree-line"><span class="tree-branch">‚îî‚îÄ</span> <span class="t-file">.env</span> <span class="t-comment">// API keys</span></div>
        </div>
        <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-file">index.js</span> <span class="t-comment">// entry point</span></div>
        <div class="tree-line"><span class="tree-branch">‚îú‚îÄ</span> <span class="t-file">cron.js</span> <span class="t-comment">// scheduler</span></div>
        <div class="tree-line"><span class="tree-branch">‚îî‚îÄ</span> <span class="t-file">package.json</span></div>
      </div>
    </div>
  </div>

  <div class="bottom-section">
    <h3>// –ö–æ–º–∞–Ω–¥—ã Claude Code</h3>
    <div class="cmd-list">
      <div class="cmd-item">
        <span class="cmd-prompt">$ </span><span class="cmd-text">claude "–ù–∞–ø–∏—à–∏ scraper.js ‚Äî google-trends-api + SerpAPI fallback, SQLite –æ—á–µ—Ä–µ–¥—å"</span>
        <span class="cmd-comment">// —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Å–∫—Ä–µ–π–ø–∏–Ω–≥ –±–µ–∑ Puppeteer</span>
      </div>
      <div class="cmd-item">
        <span class="cmd-prompt">$ </span><span class="cmd-text">claude "–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π LinkedIn –ø–æ—Å—Ç –Ω–∞ —Ç–µ–º—É {topic} –≤ —Å—Ç–∏–ª–µ tone-of-voice.md"</span>
        <span class="cmd-comment">// Claude sonnet-4-5-20250929, 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ A/B</span>
      </div>
      <div class="cmd-item">
        <span class="cmd-prompt">$ </span><span class="cmd-text">claude "–°–¥–µ–ª–∞–π —Ç–µ–∫—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É 1200√ó627 —á–µ—Ä–µ–∑ node-canvas –¥–ª—è: {headline}"</span>
        <span class="cmd-comment">// –±–µ–∑ SDXL ‚Äî —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –ª—É—á—à–µ –¥–ª—è engagement</span>
      </div>
      <div class="cmd-item">
        <span class="cmd-prompt">$ </span><span class="cmd-text">claude "–ù–∞–ø–∏—à–∏ poster.js ‚Äî LinkedIn ugcPosts API v2 —Å OAuth –∏ retry"</span>
        <span class="cmd-comment">// –ø—Ä—è–º–æ–π –ø–æ—Å—Ç–∏–Ω–≥ –±–µ–∑ Buffer</span>
      </div>
      <div class="cmd-item">
        <span class="cmd-prompt">$ </span><span class="cmd-text">claude "–°–æ–∑–¥–∞–π PR —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ –ø–æ tone-of-voice –Ω–∞ –æ—Å–Ω–æ–≤–µ metrics.csv"</span>
        <span class="cmd-comment">// human-in-the-loop, –Ω–µ –∞–≤—Ç–æ–∫–æ–º–º–∏—Ç</span>
      </div>
    </div>
  </div>

</div>

<script>
const modules = [
  {
    color: '#00e5ff',
    bg: '#00e5ff18',
    icon: 'üîç',
    title: '–°–∫—Ä–µ–ø–∏–Ω–≥ —Ç–µ–º',
    desc: '–°—Ç–∞–±–∏–ª—å–Ω—ã–π —Å–±–æ—Ä —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —Ç–µ–º —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π google-trends-api –∏ SerpAPI. Puppeteer –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚Äî Google –∞–∫—Ç–∏–≤–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π —Å–∫—Ä–µ–π–ø–∏–Ω–≥. –û—á–µ—Ä–µ–¥—å —Ç–µ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ SQLite.',
    tags: ['google-trends-api', 'SerpAPI', 'SQLite'],
    tools: [
      { name: 'google-trends-api', type: 'npm ¬∑ official wrapper', color: '#00e5ff' },
      { name: 'SerpAPI', type: 'Stable Google scraping', color: '#4ade80' },
      { name: 'RSS Parser', type: 'Feed scraping', color: '#f59e0b' },
      { name: 'better-sqlite3', type: 'Topic queue (no Redis)', color: '#7c3aed' },
      { name: 'Node-cron', type: 'Scheduler', color: '#ec4899' },
      { name: 'Zod', type: 'Topic schema validation', color: '#ef4444' },
    ],
    flow: ['Google Trends API', 'SerpAPI', 'Topic Scorer', 'SQLite Queue', 'Next Step'],
    steps: [
      {
        title: '–ó–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ google-trends-api',
        desc: '–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π npm-–ø–∞–∫–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç trending-–∑–∞–ø—Ä–æ—Å—ã –ø–æ –Ω–∏—à–µ. –°—Ç–∞–±–∏–ª—å–Ω–µ–µ Puppeteer ‚Äî –Ω–µ —Ç—Ä–µ–±—É–µ—Ç headless-–±—Ä–∞—É–∑–µ—Ä–∞ –∏ –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ç–∫–∏ Google.',
        code: 'const googleTrends = require("google-trends-api")\nconst result = await googleTrends.dailyTrends({ geo: "US", category: "h" })\nconst topics = JSON.parse(result).default.trendingSearchesDays[0].trendingSearches'
      },
      {
        title: '–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–∫–æ—Ä–∏–Ω–≥ —Ç–µ–º',
        desc: '–¢–µ–º—ã –æ—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –Ω–∏—à–µ –∏ –æ–±—ä—ë–º—É –ø–æ–∏—Å–∫–∞. SerpAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.',
        code: 'const scored = topics.map(t => ({ ...t, score: scoreRelevance(t) }))\nconst filtered = scored.filter(t => t.score > 0.7)'
      },
      {
        title: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQLite',
        desc: '–î–ª—è –æ–¥–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ Redis ‚Äî –æ–≤–µ—Ä–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥. SQLite —á–µ—Ä–µ–∑ better-sqlite3 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ: –±—ã—Å—Ç—Ä–æ, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Ñ–∞–π–ª —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º.',
        code: 'const db = new Database("queue.db")\ndb.prepare("INSERT INTO topics (topic, score, status) VALUES (?, ?, ?)"\n).run(topic, score, "pending")'
      },
    ]
  },
  {
    color: '#7c3aed',
    bg: '#7c3aed18',
    icon: '‚úçÔ∏è',
    title: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞',
    desc: 'Claude API –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç LinkedIn-–ø–æ—Å—Ç—ã —Å —É—á—ë—Ç–æ–º Tone of Voice –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –±—Ä–µ–Ω–¥–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç A/B –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—é –ø–æ–¥ –∞–ª–≥–æ—Ä–∏—Ç–º LinkedIn.',
    tags: ['Claude API', 'Prompt Engineering', 'A/B'],
    tools: [
      { name: 'Claude API', type: 'claude-sonnet-4-5-20250929', color: '#7c3aed' },
      { name: 'Tone of Voice', type: 'Brand guidelines', color: '#ec4899' },
      { name: 'Prompt Templates', type: 'Structured prompts', color: '#f59e0b' },
      { name: 'A/B Generator', type: 'Variant testing', color: '#00e5ff' },
      { name: 'Hook Library', type: 'Opening lines', color: '#22c55e' },
      { name: 'CTA Templates', type: 'Call to action', color: '#ef4444' },
    ],
    flow: ['Topic', 'Tone of Voice', 'Claude API', 'A/B Variants', 'Review'],
    steps: [
      {
        title: '–ó–∞–≥—Ä—É–∑–∫–∞ Tone of Voice',
        desc: '–ß–∏—Ç–∞–µ—Ç—Å—è —Ñ–∞–π–ª tone-of-voice.md ‚Äî —Å—Ç–∏–ª—å –ø–∏—Å—å–º–∞, –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç–∞, —Ü–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è.',
        code: 'const tov = fs.readFileSync("prompts/tone-of-voice.md", "utf8")\nconst template = fs.readFileSync("prompts/post-template.md", "utf8")'
      },
      {
        title: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Claude API',
        desc: 'Claude –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–º—É + ToV + —à–∞–±–ª–æ–Ω –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ—Å—Ç–∞: –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π (–¥–æ 300 —Å–ª–æ–≤) –∏ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π (600+).',
        code: 'const response = await anthropic.messages.create({\n  model: "claude-sonnet-4-5-20250929",\n  messages: [{ role: "user", content: buildPrompt(topic, tov) }]\n})'
      },
      {
        title: '–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ A/B —Å–ø–ª–∏—Ç',
        desc: '–ü–æ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –¥–ª–∏–Ω—É, –Ω–∞–ª–∏—á–∏–µ —Ö—É–∫–æ–≤, CTA –∏ —ç–º–æ–¥–∑–∏. –û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.',
        code: 'const [varA, varB] = parseTwoVariants(response.content)\nawait db.save({ topic, varA, varB, status: "pending" })'
      },
    ]
  },
  {
    color: '#ec4899',
    bg: '#ec489918',
    icon: 'üé®',
    title: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫',
    desc: '–¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ Sharp + node-canvas –≤–º–µ—Å—Ç–æ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. AI-–æ–±–ª–æ–∂–∫–∏ (SDXL) —Å–Ω–∏–∂–∞—é—Ç engagement –Ω–∞ LinkedIn ‚Äî –≤—ã–≥–ª—è–¥—è—Ç "–ø–ª–∞—Å—Ç–∏—á–Ω–æ". –¢–æ–ø-–∞–≤—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —á–∏—Å—Ç—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–ª–∏ –∫–∞—Ä—É—Å–µ–ª–∏.',
    tags: ['Sharp.js', 'node-canvas', 'Canva API'],
    tools: [
      { name: 'Sharp.js', type: 'Image processing', color: '#ec4899' },
      { name: 'node-canvas', type: 'Text card rendering', color: '#f59e0b' },
      { name: 'Canva API', type: 'Brand templates', color: '#7c3aed' },
      { name: 'Brand Palette', type: 'Colors & fonts', color: '#00e5ff' },
      { name: 'Claude API', type: 'Headline generation', color: '#22c55e' },
      { name: 'fs + CDN', type: 'Storage & delivery', color: '#ef4444' },
    ],
    flow: ['Post Title', 'Claude Headline', 'node-canvas', 'Sharp Resize', 'Save File'],
    steps: [
      {
        title: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏',
        desc: 'Claude —Å–æ–∫—Ä–∞—â–∞–µ—Ç —Ç–µ–º—É –ø–æ—Å—Ç–∞ –¥–æ 6‚Äì8 —Å–ª–æ–≤ ‚Äî —ë–º–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏. –ë–µ–∑ AI-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.',
        code: 'const headline = await anthropic.messages.create({\n  model: "claude-sonnet-4-5-20250929",\n  messages: [{ role: "user", content:\n    `Compress to 6-8 word card headline: "${postTitle}"` }]\n})'
      },
      {
        title: '–†–µ–Ω–¥–µ—Ä —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏',
        desc: 'node-canvas —Ä–∏—Å—É–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É 1200√ó627 –≤ —Å—Ç–∏–ª–µ –±—Ä–µ–Ω–¥–∞: —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω, –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç, JetBrains Mono. –ù–∏–∫–∞–∫–æ–π AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.',
        code: 'const canvas = createCanvas(1200, 627)\nconst ctx = canvas.getContext("2d")\nctx.fillStyle = "#0d0d0d"\nctx.fillRect(0, 0, 1200, 627)\nctx.font = "bold 64px JetBrains Mono"\nctx.fillStyle = "#00e5ff"\nctx.fillText(headline, 80, 280)'
      },
      {
        title: '–ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Sharp',
        desc: 'Sharp —Å–∂–∏–º–∞–µ—Ç PNG ‚Üí JPEG, –¥–æ–±–∞–≤–ª—è–µ—Ç –ª—ë–≥–∫–∏–π —à—É–º –¥–ª—è "–∂–∏–≤–æ—Å—Ç–∏". –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.',
        code: 'await sharp(canvas.toBuffer())\n  .resize(1200, 627)\n  .jpeg({ quality: 92, mozjpeg: true })\n  .toFile(`covers/${postId}.jpg`)'
      },
    ]
  },
  {
    color: '#f59e0b',
    bg: '#f59e0b18',
    icon: 'üì°',
    title: '–ê–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥',
    desc: '–ü—Ä—è–º–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ LinkedIn Share API v2 –±–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤. Buffer —Å–∏–ª—å–Ω–æ —É—Ä–µ–∑–∞–ª API –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤. Typefully/Taplio –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –Ω–µ —Ö–æ—á–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å OAuth –Ω–∞–ø—Ä—è–º—É—é.',
    tags: ['LinkedIn Share API v2', 'OAuth 2.0', 'Cron'],
    tools: [
      { name: 'LinkedIn Share API v2', type: 'ugcPosts endpoint', color: '#f59e0b' },
      { name: 'OAuth 2.0', type: 'Auth flow', color: '#00e5ff' },
      { name: 'Node-cron', type: 'Job scheduler', color: '#7c3aed' },
      { name: 'Typefully API', type: 'Alt: no-code option', color: '#ec4899' },
      { name: 'Retry Logic', type: 'Error recovery', color: '#ef4444' },
      { name: 'better-sqlite3', type: 'Post state tracking', color: '#22c55e' },
    ],
    flow: ['SQLite Queue', 'Cron Trigger', 'LinkedIn API v2', 'ugcPosts', 'Log Result'],
    steps: [
      {
        title: 'Cron-—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ',
        desc: '–ü–æ—Å—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: –≤—Ç‚Äì—á—Ç 8:00‚Äì9:00 –ø–æ UTC+3. Cron —á–∏—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π pending-–ø–æ—Å—Ç –∏–∑ SQLite.',
        code: 'cron.schedule("0 6 * * 2,3,4", async () => {\n  const post = db.prepare(\n    "SELECT * FROM posts WHERE status=? LIMIT 1"\n  ).get("pending")\n  if (post) await publishToLinkedIn(post)\n})'
      },
      {
        title: '–ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ LinkedIn Share API v2',
        desc: '–ü—Ä—è–º–æ–π POST –Ω–∞ ugcPosts endpoint. –¢—Ä–µ–±—É–µ—Ç LinkedIn OAuth app —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º w_member_social. Buffer –Ω–µ –Ω—É–∂–µ–Ω.',
        code: 'await fetch("https://api.linkedin.com/v2/ugcPosts", {\n  method: "POST",\n  headers: { Authorization: `Bearer ${ACCESS_TOKEN}` },\n  body: JSON.stringify({\n    author: `urn:li:person:${PERSON_ID}`,\n    lifecycleState: "PUBLISHED",\n    specificContent: { "com.linkedin.ugc.ShareContent": {\n      shareCommentary: { text: post.content },\n      shareMediaCategory: "NONE"\n    }}\n  })\n})'
      },
      {
        title: '–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ retry',
        desc: '–°—Ç–∞—Ç—É—Å –ø–æ—Å—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ SQLite. –ü—Ä–∏ –æ—à–∏–±–∫–µ 429/5xx ‚Äî retry —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫).',
        code: 'db.prepare("UPDATE posts SET status=?, publishedAt=? WHERE id=?"\n).run("published", Date.now(), post.id)'
      },
    ]
  },
  {
    color: '#22c55e',
    bg: '#22c55e18',
    icon: 'üìä',
    title: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Ñ–∏–¥–±—ç–∫-–ª—É–ø',
    desc: 'LinkedIn Analytics API —Ç—Ä–µ–±—É–µ—Ç Marketing Developer Platform approval (–Ω–µ–¥–µ–ª–∏ –æ–∂–∏–¥–∞–Ω–∏—è, –Ω—É–∂–Ω–∞ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è). –ù–∞ —Å—Ç–∞—Ä—Ç–µ ‚Äî Puppeteer-—Å–∫—Ä–µ–π–ø–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –∏–ª–∏ —Ä—É—á–Ω–æ–π CSV. –§–∏–¥–±—ç–∫-–ª—É–ø —Å human-in-the-loop: Claude –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–∞–≤–∫–∏ ‚Üí PR review.',
    tags: ['Puppeteer scraping', 'CSV', 'PR review'],
    tools: [
      { name: 'Puppeteer', type: 'Metrics scraping fallback', color: '#22c55e' },
      { name: 'CSV / SQLite', type: 'Manual + auto metrics', color: '#00e5ff' },
      { name: 'Claude Analysis', type: 'Pattern detection', color: '#7c3aed' },
      { name: 'GitHub PR', type: 'Human approve loop', color: '#ec4899' },
      { name: 'Weekly Digest', type: 'Markdown report', color: '#f59e0b' },
      { name: 'A/B Evaluator', type: 'Variant winner pick', color: '#ef4444' },
    ],
    flow: ['CSV / Puppeteer', 'SQLite Metrics', 'Claude Analysis', 'PR Draft', 'Human Approve'],
    steps: [
      {
        title: '–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ (–±–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ API)',
        desc: 'LinkedIn Analytics API –∑–∞–∫—Ä—ã—Ç –±–µ–∑ MDP approval. –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ç–∞—Ä—Ç: Puppeteer –ª–æ–≥–∏–Ω–∏—Ç—Å—è –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—Å—Ç–∞, –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤–Ω–æ—Å—è—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤ CSV —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é.',
        code: '// –í–∞—Ä–∏–∞–Ω—Ç A: Puppeteer scraping\nawait page.goto(`https://www.linkedin.com/feed/update/${urn}/`)\nconst impressions = await page.$eval(".analytics-impressions", el => el.textContent)\n\n// –í–∞—Ä–∏–∞–Ω—Ç B: —Ä—É—á–Ω–æ–π CSV import\nconst rows = fs.readFileSync("metrics.csv", "utf8")'
      },
      {
        title: '–ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —á–µ—Ä–µ–∑ Claude',
        desc: 'Claude –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–ø-5 –ø–æ—Å—Ç–æ–≤ –Ω–µ–¥–µ–ª–∏: –∫–∞–∫–∏–µ —Ç–µ–º—ã, —Ö—É–∫–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–ª–∏ –Ω–∞–∏–±–æ–ª—å—à–∏–π –æ—Ö–≤–∞—Ç –∏ engagement.',
        code: 'const response = await anthropic.messages.create({\n  model: "claude-sonnet-4-5-20250929",\n  messages: [{ role: "user", content:\n    `Analyze these posts and suggest tone-of-voice improvements:\\n${JSON.stringify(topPosts)}` }]\n})'
      },
      {
        title: '–§–∏–¥–±—ç–∫-–ª—É–ø —Å PR review',
        desc: 'Claude –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç tone-of-voice.md –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî —Å—Ç–∏–ª—å "—É–ø–ª—ã–≤—ë—Ç" –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Ç–µ—Ä–∞—Ü–∏–π. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è PR —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∫–∞–º–∏. –ê–≤—Ç–æ—Ä –∞–ø–ø—Ä—É–≤–∏—Ç –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç.',
        code: '// Claude –ø–∏—à–µ—Ç diff-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª\nfs.writeFileSync("prompts/tov-suggestions.md", analysis)\n\n// –°–æ–∑–¥–∞—ë—Ç—Å—è PR –¥–ª—è —Ä—É—á–Ω–æ–≥–æ review\nawait exec("git checkout -b weekly-tov-update")\nawait exec("git add prompts/tov-suggestions.md")\nawait exec(`gh pr create --title "Weekly ToV suggestions" \\\n  --body "${analysis.summary}"`)'
      },
    ]
  }
]

function show(idx, el) {
  // update active card
  document.querySelectorAll('.card').forEach(c => c.classList.remove('active'))
  el.classList.add('active')

  const m = modules[idx]
  const detail = document.getElementById('detail')

  detail.innerHTML = `
    <div class="detail-content">
      <div class="detail-header">
        <div class="detail-icon-wrap" style="background:${m.bg}">
          <span>${m.icon}</span>
        </div>
        <div>
          <h2 style="color:${m.color}">${m.title}</h2>
          <p>${m.desc}</p>
          <div style="margin-top:8px">
            ${m.tags.map(t => `<span class="tag" style="color:${m.color};border-color:${m.color}44">${t}</span>`).join('')}
          </div>
        </div>
      </div>

      <div>
        <div class="section-label">// –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</div>
        <div class="tools-grid">
          ${m.tools.map(t => `
            <div class="tool-chip">
              <div class="tool-dot" style="background:${t.color}"></div>
              <div>
                <div class="tool-name">${t.name}</div>
                <div class="tool-type">${t.type}</div>
              </div>
            </div>
          `).join('')}
        </div>
      </div>

      <div>
        <div class="section-label">// Data Flow</div>
        <div class="flow">
          ${m.flow.map((node, i) => `
            <div class="flow-node" style="${i===0?'border-color:'+m.color+';color:'+m.color:''}">${node}</div>
            ${i < m.flow.length-1 ? '<span class="flow-arrow">‚Üí</span>' : ''}
          `).join('')}
        </div>
      </div>

      <div>
        <div class="section-label">// –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏</div>
        <div class="steps">
          ${m.steps.map((s, i) => `
            <div class="step" style="--step-color:${m.color}">
              <div>
                <div class="step-num">${String(i+1).padStart(2,'0')}</div>
                <div class="step-line"></div>
              </div>
              <div class="step-body">
                <div class="step-title">${s.title}</div>
                <div class="step-desc">${s.desc}</div>
                <div class="step-code" style="color:${m.color}">${s.code}</div>
              </div>
            </div>
          `).join('')}
        </div>
      </div>
    </div>
  `
}

// init with first card
show(0, document.querySelector('.card'))
</script>
</body>
</html>
